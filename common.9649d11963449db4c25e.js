(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"7drl":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("8Y7J"),i=n("SVse");const s=function(e){return{full:e}};let a=(()=>{class e{constructor(){this.emitter=new r.EventEmitter}ngOnInit(){}emitEvent(){this.emitter.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-ui-button"]],inputs:{text:"text",full:"full",disabled:"disabled"},outputs:{emitter:"emitter"},decls:2,vars:5,consts:[[1,"btn",3,"ngClass","disabled","click"],[3,"innerHtml"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",0),r["\u0275\u0275listener"]("click",function(){return t.emitEvent()}),r["\u0275\u0275element"](1,"span",1),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](3,s,t.full))("disabled",t.disabled),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHtml",t.text,r["\u0275\u0275sanitizeHtml"]))},directives:[i.i],styles:[".full[_ngcontent-%COMP%]{width:100%}"]}),e})()},tsYp:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("8Y7J"),i=n("XNiG"),s=n("zx2A");class a{constructor(e){this.notifier=e}call(e,t){const n=new o(e),r=Object(s.c)(this.notifier,new s.a(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class o extends s.b{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var l=n("IzEk"),p=n("0np6"),c=n("iInd"),m=n("fbMX"),d=n("TSSN");const u={name:"light",properties:{"--background-light":"#ffffff","--primary-yellow":"#FFCB02","--primary-blue":"#3D5AA6","--text":"#000000"}},h={name:"dark",properties:{"--background-light":"#1a1d2b","--primary-yellow":"#FFCB02","--primary-blue":"#3D5AA6","--text":"#ffffff"}};let f=(()=>{class e{constructor(){this.active=u,this.availableThemes=[u,h]}getAvailableThemes(){return this.availableThemes}setActiveTheme(e){switch(e){case"light":this.changeTheme(u);break;case"dark":this.changeTheme(h)}}changeTheme(e){this.active=e,Object.keys(this.active.properties).forEach(e=>{document.documentElement.style.setProperty(e,this.active.properties[e])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n("s7LF"),v=n("SVse"),y=n("7drl");const b=["settingsForm"],S=function(e){return{invalid:e}};function E(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",17,18),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().form.player=t}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275reference"](1),t=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",t.form.player)("ngClass",r["\u0275\u0275pureFunction1"](2,S,e.invalid&&(e.dirty||e.touched)))}}function C(e,t){if(1&e&&r["\u0275\u0275element"](0,"span",19),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("innerHtml",e.form.player,r["\u0275\u0275sanitizeHtml"])}}function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",20),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e.key),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,""+e.value)," ")}}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",20),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e.key),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,""+e.value)," ")}}function T(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",20),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("value",e.key),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,""+e.value)," ")}}let M=(()=>{class e{constructor(e,t,n,s){this.route=e,this.storage=t,this.translate=n,this.themeService=s,this.saved=new r.EventEmitter,this.storageKey=p.b.DB_SETTINGS,this.form={},this.options={},this.ngUnsubscribe=new i.a}ngOnInit(){this.prepForm(),this.autofillForm()}prepForm(){var e;this.getTranslations(),this.translate.onLangChange.pipe((e=this.ngUnsubscribe,t=>t.lift(new a(e)))).subscribe(()=>{this.getTranslations()})}getTranslations(){this.translate.get("SETTINGS").pipe(Object(l.a)(1)).subscribe(e=>{this.options.langs=e.LANG_OPTIONS,this.options.themes=e.THEME_OPTIONS,this.options.renders=e.RENDER_OPTIONS,this.preselectOptions()})}preselectOptions(){this.form.lang=this.form.lang?this.form.lang:this.options.langs?Object.keys(this.options.langs)[0]:null,this.form.theme=this.form.theme?this.form.theme:this.options.themes?Object.keys(this.options.themes)[0]:null,this.form.render=this.form.render?this.form.render:this.options.renders?Object.keys(this.options.renders)[0]:null}autofillForm(){this.storage.getItem(this.storageKey).toPromise().then(e=>{e&&(this.form.player=e.player,this.form.lang=e.lang,this.form.theme=e.theme,this.themeService.setActiveTheme(this.form.theme),this.form.render=e.render)})}optionChange(e,t){if("page"==this.mode)switch(t){case"lang":this.translate.use(e);break;case"theme":this.themeService.setActiveTheme(e)}}submit(){this.settingsForm.invalid||this.storage.saveItem(this.storageKey,this.form).subscribe(e=>{"page"==this.mode?this.route.navigateByUrl("arena"):(this.translate.use(e.lang),this.themeService.setActiveTheme(e.theme),this.saved.emit(!0))},e=>{console.error(e)})}ngOnDestroy(){this.ngUnsubscribe.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](d.d),r["\u0275\u0275directiveInject"](f))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-settings"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](b,1),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.settingsForm=e.first)}},inputs:{mode:"mode"},outputs:{saved:"saved"},decls:39,vars:42,consts:[[1,"form"],["settingsForm","ngForm"],[1,"form-item"],["for","player"],["type","text","name","player","required","",3,"ngModel","ngClass","ngModelChange",4,"ngIf","ngIfElse"],["modeModal",""],["for","lang"],["name","lang","id","","required","",3,"ngModel","ngClass","ngModelChange"],["lang","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","theme"],["name","theme","id","","required","",3,"ngModel","ngClass","ngModelChange"],["theme","ngModel"],["for","render"],["name","render","id","","required","",3,"ngModel","ngClass","ngModelChange"],["render","ngModel"],[3,"text","disabled","emitter"],["type","text","name","player","required","",3,"ngModel","ngClass","ngModelChange"],["player","ngModel"],[3,"innerHtml"],[3,"value"]],template:function(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"h1"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"form",0,1),r["\u0275\u0275elementStart"](5,"div",2),r["\u0275\u0275elementStart"](6,"label",3),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,E,2,4,"input",4),r["\u0275\u0275template"](10,C,1,1,"ng-template",null,5,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",2),r["\u0275\u0275elementStart"](13,"label",6),r["\u0275\u0275text"](14),r["\u0275\u0275pipe"](15,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"select",7,8),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.lang=e})("ngModelChange",function(n){r["\u0275\u0275restoreView"](e);const i=r["\u0275\u0275reference"](17);return t.optionChange(n,i.name)}),r["\u0275\u0275template"](18,x,3,4,"option",9),r["\u0275\u0275pipe"](19,"keyvalue"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",2),r["\u0275\u0275elementStart"](21,"label",10),r["\u0275\u0275text"](22),r["\u0275\u0275pipe"](23,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"select",11,12),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.theme=e})("ngModelChange",function(n){r["\u0275\u0275restoreView"](e);const i=r["\u0275\u0275reference"](25);return t.optionChange(n,i.name)}),r["\u0275\u0275template"](26,I,3,4,"option",9),r["\u0275\u0275pipe"](27,"keyvalue"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",2),r["\u0275\u0275elementStart"](29,"label",13),r["\u0275\u0275text"](30),r["\u0275\u0275pipe"](31,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"select",14,15),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.form.render=e})("ngModelChange",function(n){r["\u0275\u0275restoreView"](e);const i=r["\u0275\u0275reference"](33);return t.optionChange(n,i.name)}),r["\u0275\u0275template"](34,T,3,4,"option",9),r["\u0275\u0275pipe"](35,"keyvalue"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div"),r["\u0275\u0275elementStart"](37,"app-ui-button",16),r["\u0275\u0275listener"]("emitter",function(){return t.submit()}),r["\u0275\u0275pipe"](38,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275reference"](4),n=r["\u0275\u0275reference"](11),i=r["\u0275\u0275reference"](17),s=r["\u0275\u0275reference"](25),a=r["\u0275\u0275reference"](33);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,18,"SETTINGS.title")),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](8,20,"SETTINGS.player"),": "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf","page"==t.mode)("ngIfElse",n),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](15,22,"SETTINGS.lang"),": "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.form.lang)("ngClass",r["\u0275\u0275pureFunction1"](36,S,i.invalid&&(i.dirty||i.touched))),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](19,24,t.options.langs)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](23,26,"SETTINGS.theme"),": "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.form.theme)("ngClass",r["\u0275\u0275pureFunction1"](38,S,s.invalid&&(s.dirty||s.touched))),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](27,28,t.options.themes)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](31,30,"SETTINGS.render"),": "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",t.form.render)("ngClass",r["\u0275\u0275pureFunction1"](40,S,a.invalid&&(a.dirty||a.touched))),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](35,32,t.options.renders)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("text",r["\u0275\u0275pipeBind1"](38,34,"SETTINGS.button"))("disabled",e.invalid)}},directives:[g.k,g.d,g.e,v.k,g.i,g.h,g.c,g.f,v.i,v.j,y.a,g.a,g.g,g.j],pipes:[d.c,v.e],styles:[".form[_ngcontent-%COMP%]{margin:15px 0}"]}),e})()}}]);